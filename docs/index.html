<!DOCTYPE html>
<html>
  <head>
    <title>Colour Palette</title>

    <script src="https://d3js.org/d3.v7.min.js"></script>

    <style>
      .color-square {
        cursor: pointer;
      }
      #tooltip {
        position: absolute;
        padding: 10px;
        border: 1px solid black;
        border-radius: 10px;
        color: white;
        opacity: 0;
        font-size: 18px;
        font-weight: 400;
        /* justify-content: center;
        align-items: center; */
        text-align: center;
      }
      .flex {
        display: flex;
      }
      body {
        font-family: arial;
      }
      p {
        font-size: 15px;
        line-height: 1.3em;
        margin-bottom: 10px;
      }
      .palette {
        width: 1000px;
        height: 700px;
        flex-grow: 1;
        flex-shrink: 1;
        margin: 30px 0px;
      }
      .hex-label {
        font-size: 12px;
      }
      .customise-options {
        background-color: rgb(232, 232, 232);
        border: 1px solid rgb(154, 154, 154);
        padding: 10px;
        margin: 10px;
        width: 45%;
        flex-grow: 1;
        border-radius: 10px;
        flex-shrink: 1;
      }
      form {
        line-height: 1.8em;
        font-weight: 100;
        font-size: 15px;
      }
      .form-container {
        display: flex;
      }
      h2 {
        line-height: 0.5em;
        font-size: 18px;
        font-weight: 600;
      }
      .button-container {
        display: flex;
        margin: auto;
        justify-items: center;
      }
      button {
        margin: 10px;
        /* height: 40px; */
        width: 120px;
        font-size: 15px;
        font-weight: 400;
      }
      #cb-options {
        width: 25%;
        min-width: 320px;
        margin: auto 0px;
        flex-shrink: 1;
      }
      table {
        font-size: 12px;
      }
      .cb-button {
        font-size: 12px;
      }
      #color-blind-section {
        display: flex;
      }
      #cb-chart {
        flex-shrink: 1;
        flex-grow: 1;
        height: 500px;
      }
    </style>
  </head>
  <body>
    <h1>Colour Palette Generator</h1>
    <p>
      This is a tool to generate a neatly displayed colour palette. Colour
      palettes can be created from a single initial colour (hex code) or
      existing colour palettes can be entered as a list of hex values.
    </p>
    <p>
      Colour palette generation is performed by altering the hue value of the
      <a
        href="https://www.nixsensor.com/what-is-hsl-color/?srsltid=AfmBOopnKqUtj5_dmxeIfpSQvLAvos1fAaCkSQ7uMngOYGu-DvyzLJV8"
        >HSL colour wheel</a
      >. The hue is altered by set values (I like to think of them as
      rotations). By using evenly spread values, nice colour palettes can be
      generated. I have included some default options which tend to look nice,
      but feel free to test your own custom rotations (as a comma separated
      list).
    </p>
    <p>
      Once the hues are added, the lightness of the colour is altered from 10%
      to 90%, to create a nice range of dark and light colours. I probably would
      avoid using all the shades of each colour, but its nice to have a range of
      shades for different use cases.
    </p>
    <p>
      Be aware, the saturation value is constant throughout the colour palette,
      which means over or under saturated initial colours may create poor colour
      palettes.
    </p>
    <p>
      The url created from generating the colour has all the parameters to
      create the palette, so feel free to save or share a link if you like a
      palette. You can also save the palette as an image or as a JSON object
      (buttons at bottom), perfect for future use.
    </p>
    <div class="form-container">
      <div class="customise-options">
        <h2 class="form-header">Generate palette from an initial colour:</h2>
        <form id="initial-color-submission">
          <label for="hex-input">Input Initial colour hex:</label>
          <input type="text" id="hex-input" name="hexInput" required /><br />
          <label for="rotation"
            >Select how hues are generated: [Hue value changes in square
            brackets]</label
          ><br />
          <input
            type="radio"
            id="default1"
            name="rotation"
            value="default1"
            checked
          />
          <label for="default1">Default 1 [-30, 30, 120, 180, 240]</label><br />
          <input type="radio" id="default2" name="rotation" value="default2" />
          <label for="default2">Default 2 [-60, 60, 150, 180, 210]</label><br />
          <input
            type="radio"
            id="analogous"
            name="rotation"
            value="analogous"
          />
          <label for="analogous">Analogous [20, 40, 60, 80, 100,120]</label
          ><br />
          <input
            type="radio"
            id="divergent"
            name="rotation"
            value="divergent"
          />
          <label for="divergent">Divergent [60, 120, 180, 240, 300]</label
          ><br />
          <input
            type="radio"
            id="goldenRatio"
            name="rotation"
            value="goldenRatio"
          />
          <label for="goldenRatio"
            >Golden Ratio [32.5, 52.5, 85.0, 137.5, 222.5]</label
          ><br />
          <input
            type="radio"
            id="goldenRatio2"
            name="rotation"
            value="goldenRatio2"
          />
          <label for="goldenRatio2"
            >Golden Ratio 2 [-32.5, -52.5, -85.0, -137.5, -222.5]</label
          ><br />
          <input type="radio" id="custom" name="rotation" value="custom" />
          <label for="custom">Custom</label>
          <input type="text" id="custom-rotation" name="customRotation" />
          <br />
          <input type="submit" value="Submit" />
        </form>
      </div>
      <div class="customise-options">
        <h2 class="form-header">Plot a custom palette</h2>
        <form id="initial-color-submission">
          <label for="hex-list"
            >Enter hex codes as a comma separated list: </label
          ><br />
          <input
            type="text"
            id="hex-list"
            name="hexList"
            required
            size="40%"
          /><br />
          <input type="submit" value="Submit" />
        </form>
      </div>
    </div>
    <!-- <div class="customise-options"></div> -->

    <div class="flex">
      <div id="palette" class="palette"></div>
    </div>
    <div class="button-container">
      <button onclick="saveChart('palette-svg')">Save Image</button>
      <button onclick="saveJson()">Save JSON</button>
    </div>
    <div id="color-blind-section">
      <div class="customise-options" id="cb-options">
        <h2>Accessibility Check</h2>
        <p>
          Check how the colours may be seen with different forms of
          colour-blindness. For this I am using the npm package
          <a href="https://www.npmjs.com/package/color-blind">color-blind</a> to
          simulate colors. I cannot personally comment on the accuracy of this
          simulation, but it may be helpful. I've only included the four most
          common types of colour-blindness, as the proportions of the others are
          very low (<0.01%). I have taken the proportions from
          <a href="https://en.wikipedia.org/wiki/Color_blindness#Epidemiology"
            >wikipedia.</a
          >
        </p>
        <table>
          <thead>
            <th>Type of Color Blindness</th>
            <th>Proportion of Male Population</th>

            <th>Button</th>
          </thead>
          <tbody>
            <tr>
              <td>Deuteranomalous</td>
              <td>6.3%</td>

              <td>
                <button
                  class="cb-button"
                  onclick="colorBlindCheck('deuteranomaly')"
                >
                  Deuteranomaly
                </button>
              </td>
            </tr>
            <tr>
              <td>Protanomalous</td>
              <td>1.3%</td>

              <td>
                <button
                  class="cb-button"
                  onclick="colorBlindCheck('protanomaly')"
                >
                  Protanomaly
                </button>
              </td>
            </tr>
            <tr>
              <td>Protanopia</td>
              <td>1.3%</td>

              <td>
                <button
                  class="cb-button"
                  onclick="colorBlindCheck('protanopia')"
                >
                  Protanopia
                </button>
              </td>
            </tr>
            <tr>
              <td>Deauteranopia</td>
              <td>1.2%</td>

              <td>
                <button
                  class="cb-button"
                  onclick="colorBlindCheck('deuteranopia')"
                >
                  Deuteranopia
                </button>
              </td>
            </tr>
          </tbody>
        </table>
        <!-- <button onclick="colorBlindCheck('protanopia')">Protanopia</button>
      <button onclick="colorBlindCheck('deuteranopia')">Deauteranopia</button>
      <button onclick="colorBlindCheck('tritanopia')">Tritanopia</button>
      <button onclick="colorBlindCheck('achromatopsia')">Achromatopsia</button> -->
      </div>
      <div class="palette" id="cb-chart"></div>
    </div>
    <div id="tooltip"></div>

    <script src="bundle.js"></script>
  </body>
</html>
